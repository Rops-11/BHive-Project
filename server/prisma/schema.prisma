generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_DEV")
}

model User {
  id             String    @id @default(uuid())
  displayName    String
  email          String    @unique
  hashedPassword String
  isAdmin        Boolean   @default(false)
  refreshToken   String?
  createdAt      DateTime  @default(now())
  lastLogin      DateTime?
  bookings       Booking[]
  histories      History[]
}

model Room {
  id          String    @id @default(uuid())
  roomType    String
  roomNumber  String    @unique
  roomRate    Int
  isAvailable Boolean   @default(true)
  maxGuests   Int
  bookings    Booking[]
}

model History {
  id        String  @id @default(uuid())
  userId    String
  bookingId String  @unique
  booking   Booking @relation(fields: [bookingId], references: [id])
  user      User    @relation(fields: [userId], references: [id])
}

model Booking {
  id               String   @id @default(uuid())
  roomId           String
  userId           String
  roomNumber       String
  name             String
  dateBooked       DateTime @default(now())
  shift            String // User, will be determined after confirmation from the hotel. Admin, will be determined on book.
  checkIn          DateTime
  checkOut         DateTime
  numberOfAdults   Int
  numberOfChildren Int
  mobileNumber     String
  status           String
  room             Room     @relation(fields: [roomId], references: [id])
  user             User     @relation(fields: [userId], references: [id])
  history          History?
}
